language: java

sudo: required

jdk:
  - oraclejdk8

env:
  global:
    - secure:"Dupdb/HgNXKu8kOo7/RcpMCAyEZA8hLw77nVPTxXUo39UUI/ipnbUfRHamiWC2/MCqTEHu+1eReCmuFj2ULk4g+vi/8VYjrmX1TiHwikIFEAGrRRK0VkuWegqloYtXuxa7gtuQ96PWjqJ48op/WYyYvKiH0cFOMHsZOt5cl9PL4="

before_script:
  - sudo apt-get update
  - sudo apt-get install phantomjs

script:
  - ./run_test.sh

after_success:
  - cd redpen-core/
  - mvn clean test -DrepoToken=${REPO_TOKEN} jacoco:report coveralls:jacoco

before_install:
  - wget https://github.com/redpen-cc/redpen/archive/38ccd91ead508793de2c3b0a55efac5f88cfe6ca.zip
  - unzip 38ccd91ead508793de2c3b0a55efac5f88cfe6ca.zip
  - cp -rT redpen-38ccd91ead508793de2c3b0a55efac5f88cfe6ca ./
  - rm -r redpen-38ccd91ead508793de2c3b0a55efac5f88cfe6ca
  - rm 38ccd91ead508793de2c3b0a55efac5f88cfe6ca.zip
