language: java

sudo: required

services:
  - docker
  - mysql

jdk:
  - oraclejdk8

before_install:
  - wget https://github.com/AxonFramework/AxonFramework/archive/f7e2324e1551797a461f0d53165dd490c274ccaa.zip
  - unzip f7e2324e1551797a461f0d53165dd490c274ccaa.zip
  - cp -rT AxonFramework-f7e2324e1551797a461f0d53165dd490c274ccaa ./
  - rm -r AxonFramework-f7e2324e1551797a461f0d53165dd490c274ccaa
  - rm f7e2324e1551797a461f0d53165dd490c274ccaa.zip
  - docker run -d --shm-size=1g -p 1521:1521 -p 8080:8080 alexeiled/docker-oracle-xe-11g
  - docker ps
  - mysql -e 'CREATE DATABASE axon;'

install: true

cache:
  directories:
  - $HOME/.m2

script:
  - mvn clean verify -B

notifications:
  slack:
    secure: d1HN9GBeH0e6EsHjNkPVXgBaFCYqbvjkZv9GUkpWnyjNYP5V1snSk6sO4X6ONttydgzfbElZTOfrgDzRTgWJ76iDMxAPccFPY7dmGcpw8/2TOjwP6H6yEitiiZcWR9fssTM2Li2WQtuGkwaVBhw15JNABzEsexxqXC+Cu48yUfA=
