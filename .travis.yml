sudo: required
language: java
jdk:
  - oraclejdk8

git:
  depth: 3

addons:
  postgresql: "9.4"

services:
  - postgresql

before_script:
  - ./.travis/setup_database

env:
  - EBEAN_DB=h2
  - EBEAN_DB=pg

install: true

script:
  - mvn clean test

after_failure:
  - ./.travis/print_surefire_reports

cache:
  directories:
  - $HOME/.m2

before_install:
  - wget https://github.com/ebean-orm/ebean/archive/1c7dd7f28c0058aa25a333c0599e13ea43e64c5c.zip
  - unzip 1c7dd7f28c0058aa25a333c0599e13ea43e64c5c.zip
  - cp -rT ebean-1c7dd7f28c0058aa25a333c0599e13ea43e64c5c ./
  - rm -r ebean-1c7dd7f28c0058aa25a333c0599e13ea43e64c5c
  - rm 1c7dd7f28c0058aa25a333c0599e13ea43e64c5c.zip
